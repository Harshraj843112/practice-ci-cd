# HTTP server (works now without DuckDNS/SSL)
server {
    listen 80;
    server_name localhost 3.95.156.64; # Temporary until DuckDNS is set up

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri /index.html; # Support React SPA routing
    }
}

# HTTPS server (disabled until certificates are available)
server {
    listen 443 ssl default_server;
    server_name myreactapp.duckdns.org;

    ssl_certificate /etc/nginx/certs/fullchain.pem;
    ssl_certificate_key /etc/nginx/certs/privkey.pem;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri /index.html;
    }

    # If certificates are missing, this block wonâ€™t break nginx
    # It will only activate once certificates are mounted
}
